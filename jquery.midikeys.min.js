/**
 * jquery.midikeys 0.1.0
 * (c) 2013 Mike Dominice <mike@mikedominice.com>
 * jquery.midikeys is freely distributable under the MIT license.
 */
(function(t,e,n){"use strict";if("object"==typeof exports)module.exports=n(require("jquery"));else{if(void 0===e||!e.amd)return n(t.jQuery);e(["jquery"],n)}})(this,this.define,function(t,e){"use strict";function n(e,n){var i=t.extend(this,{timestamp:e,data:n});i.getChannel=function(){return 15&n[0]},i.getVelocity=function(){return n[2]},i.getOctave=function(){return Math.floor(n[1]/c)-1},i.getNoteLetter=function(){return h[n[1]%c]},i.getNote=function(){return this.getNoteLetter()+this.getOctave()},i.toString=function(){var t=["type="+i.getType(),"channel="+i.getChannel(),"note="+i.getNote(),"velocity="+i.getVelocity()];return"MIDIEvent["+t.join(",")+"]"},i.getType=function(){return m[240&n[0]]}}function i(e,i){var o=this,r={},a=o.$el=t(e),c=o.opts=t.extend({},p,i),h=function(e,i){return function(o){var f=V(o,c.startNote),u=g+f;if(f){switch(o.type){case"keydown":if(r[u])return;r[u]=!0;break;case"keyup":delete r[u]}i=t.isFunction(i)?i(o.timeStamp):i;var s=N(e|c.channel,f,i);a.trigger("message",new n(o.timeStamp,s))}}},v=h(f,c.noteOnVelocity),O=h(u,c.noteOffVelocity);o._defaults=p,o.option=function(t,e){d.indexOf(t)>-1&&(c[t]=e)},a.on(s,v),a.on(y,O),o[l]=function(){a.off(s,v),a.off(y,O)}}var o=48,r=127,a=64,f=144,u=128,c=12,s="keydown",y="keyup",l="destroy",h=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],p={startNote:o,noteOnVelocity:r,noteOffVelocity:a,channel:0},d=["startNote","noteOnVelocity","noteOffVelocity","channel"],g="midiKeys",v="_plugin_"+g,O="ZSXDCVGBHNJMQ2W3ER5T6Y7UI9O0P",m={},N=function(t,e,n){var i=new Uint8Array(3);return i[0]=t,i[1]=e,i[2]=n,i},V=function(t,e){var n=String.fromCharCode(t.keyCode),i=O.indexOf(n);if(!(0>i))return e+i};return m[f]="NOTE ON",m[u]="NOTE_OFF",t.fn[g]=function(n){var o=arguments;if(n===e||"object"==typeof n)return this.each(function(){t.data(this,v)||t.data(this,v,new i(this,n))});if("string"==typeof n){var r;return o=Array.prototype.slice.call(o,1),this.each(function(){var e=t(this).data(v);e instanceof i&&"function"==typeof e[n]&&(r=e[n].apply(e,o)),n===l&&t.data(this,v,null)}),r!==e?r:this}},t.fn[g]});